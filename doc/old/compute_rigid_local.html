<HTML>
<CENTER><A HREF = "http://lammps.sandia.gov">LAMMPS WWW Site</A> - <A HREF = "Manual.html">LAMMPS Documentation</A> - <A HREF = "Section_commands.html#comm">LAMMPS Commands</A> 
</CENTER>






<HR>

<H3>compute rigid/local command 
</H3>
<P><B>Syntax:</B>
</P>
<PRE>compute ID group-ID rigid/local rigidID input1 input2 ... 
</PRE>
<UL><LI>ID, group-ID are documented in <A HREF = "compute.html">compute</A> command 

<LI>rigid/local = style name of this compute command 

<LI>rigidID = ID of fix rigid/small command or one of its variants 

<LI>input = one or more rigid body attributes 

<PRE>  possible attributes = id, mol, mass,
                        x, y, z, xu, yu, zu, ix, iy, iz
                        vx, vy, vz, fx, fy, fz,
                        omegax, omegay, omegaz,
                        angmomx, angmomy, angmomz,
                        quatw, quati, quatj, quatk,
                        tqx, tqy, tqz,
                        inertiax, inertiay, inertiaz
      id = atom ID of atom within body which owns body properties
      mol = molecule ID used to define body in <A HREF = "fix_rigid.html">fix rigid/small</A> command
      mass = total mass of body
      x,y,z = center of mass coords of body
      xu,yu,zu = unwrapped center of mass coords of body
      ix,iy,iz = box image that the center of mass is in
      vx,vy,vz = center of mass velocities
      fx,fy,fz = force of center of mass
      omegax,omegay,omegaz = angular velocity of body
      angmomx,angmomy,angmomz = angular momentum of body
      quatw,quati,quatj,quatk = quaternion components for body
      tqx,tqy,tqz = torque on body
      inertiax,inertiay,inertiaz = diagonalized moments of inertia of body 
</PRE>

</UL>
<P><B>Examples:</B>
</P>
<PRE>compute 1 all rigid/local myRigid mol x y z 
</PRE>
<P><B>Description:</B>
</P>
<P>Define a computation that simply stores rigid body attributes for
rigid bodies defined by the <A HREF = "fix_rigid.html">fix rigid/small</A> command
or one of its NVE, NVT, NPT, NPH variants.  The data is stored as
local data so it can be accessed by other <A HREF = "Section_howto.html#howto_15">output
commands</A> that process local data, such as
the <A HREF = "compute_reduce.html">compute reduce</A> or <A HREF = "dump.html">dump local</A>
commands.
</P>
<P>Note that this command only works with the <A HREF = "fix_rigid.html">fix
rigid/small</A> command or its variants, not the fix rigid
command and its variants.  The ID of the <A HREF = "fix_rigid.html">fix
rigid/small</A> command used to define rigid bodies must
be specified as <I>rigidID</I>.  The <A HREF = "fix_rigid.html">fix rigid</A> command is
typically used to define a handful of (potentially very large) rigid
bodies.  It outputs similar per-body information as this command
directly from the fix as global data; see the <A HREF = "fix_rigid.html">fix
rigid</A> doc page for details
</P>
<P>The local data stored by this command is generated by looping over all
the atoms owned on a processor.  If the atom is not in the specified
<I>group-ID</I> or is not part of a rigid body it is skipped.  If it is not
the atom within a body that is assigned to store the body information
it is skipped (only one atom per body is so assigned).  If it is the
assigned atom, then the info for that body is output.  This means that
information for N bodies is generated.  N may be less than the # of
bodies defined by the fix rigid command, if the atoms in some bodies
are not in the <I>group-ID</I>.
</P>
<P>NOTE: Which atom in a body owns the body info is determined internal
to LAMMPS; it's the one nearest the geometric center of the body.
Typically you should avoid this complication, by defining the group
associated with this fix to include/exclude entire bodies.
</P>
<P>Note that as atoms and bodies migrate from processor to processor,
there will be no consistent ordering of the entries within the local
vector or array from one timestep to the next.
</P>
<P>Here is an example of how to use this compute to dump rigid body info
to a file:
</P>
<PRE>compute 1 all rigid/local myRigid mol x y z fx fy fz
dump 1 all local 1000 tmp.dump index c_1[1] c_1[2] c_1[3] c_1[4] c_1[5] c_1[6] c_1[7] 
</PRE>
<HR>

<P>This section explains the rigid body attributes that can be specified.
</P>
<P>The <I>id</I> attribute is the atomID of the atom which owns the rigid body, which is
assigned by the <A HREF = "fix_rigid.html">fix rigid/small</A> command.
</P>
<P>The <I>mol</I> attribute is the molecule ID of the rigid body.  It should
be the molecule ID which all of the atoms in the body belong to, since
that is how the <A HREF = "fix_rigid.html">fix rigid/small</A> command defines its
rigid bodies.
</P>
<P>The <I>mass</I> attribute is the total mass of the rigid body.
</P>
<P>There are two options for outputting the coordinates of the center of
mass (COM) of the body.  The <I>x</I>, <I>y</I>, <I>z</I> attributes write the COM
"unscaled", in the appropriate distance <A HREF = "units.html">units</A> (Angstroms,
sigma, etc).  Use <I>xu</I>, <I>yu</I>, <I>zu</I> if you want the COM "unwrapped" by
the image flags for each atobody.  Unwrapped means that if the body
COM has passed thru a periodic boundary one or more times, the value
is generated what the COM coordinate would be if it had not been
wrapped back into the periodic box.
</P>
<P>The image flags for the body can be generated directly using the <I>ix</I>,
<I>iy</I>, <I>iz</I> attributes.  For periodic dimensions, they specify which
image of the simulation box the COM is considered to be in.  An image
of 0 means it is inside the box as defined.  A value of 2 means add 2
box lengths to get the true value.  A value of -1 means subtract 1 box
length to get the true value.  LAMMPS updates these flags as the rigid
body COMs cross periodic boundaries during the simulation.
</P>
<P>The <I>vx</I>, <I>vy</I>, <I>vz</I>, <I>fx</I>, <I>fy</I>, <I>fz</I> attributes are components of
the COM velocity and force on the COM of the body.
</P>
<P>The <I>omegax</I>, <I>omegay</I>, and <I>omegaz</I> attributes are the angular
velocity components of the body around its COM.
</P>
<P>The <I>angmomx</I>, <I>angmomy</I>, and <I>angmomz</I> attributes are the angular
momentum components of the body around its COM.
</P>
<P>The <I>quatw</I>, <I>quati</I>, <I>quatj</I>, and <I>quatk</I> attributes are the
components of the 4-vector quaternion representing the orientation of
the rigid body.  See the <A HREF = "set.html">set</A> command for an explanation of
the quaternion vector.
</P>
<P>The <I>angmomx</I>, <I>angmomy</I>, and <I>angmomz</I> attributes are the angular
momentum components of the body around its COM.
</P>
<P>The <I>tqx</I>, <I>tqy</I>, <I>tqz</I> attributes are components of the torque acting
on the body around its COM.
</P>
<P>The <I>inertiax</I>, <I>inertiay</I>, <I>inertiaz</I> attributes are components of
diagonalized inertia tensor for the body, i.e the 3 moments of inertia
for the body around its principal axes, as computed internally by
LAMMPS.
</P>
<HR>

<P><B>Output info:</B>
</P>
<P>This compute calculates a local vector or local array depending on the
number of keywords.  The length of the vector or number of rows in the
array is the number of rigid bodies.  If a single keyword is
specified, a local vector is produced.  If two or more keywords are
specified, a local array is produced where the number of columns = the
number of keywords.  The vector or array can be accessed by any
command that uses local values from a compute as input.  See <A HREF = "Section_howto.html#howto_15">this
section</A> for an overview of LAMMPS output
options.
</P>
<P>The vector or array values will be in whatever <A HREF = "units.html">units</A> the
corresponding attribute is in:
</P>
<UL><LI>id,mol = unitless
<LI>mass = mass units
<LI>x,y,z and xy,yu,zu = distance units
<LI>vx,vy,vz = velocity units
<LI>fx,fy,fz = force units
<LI>omegax,omegay,omegaz = radians/time units
<LI>angmomx,angmomy,angmomz = mass*distance^2/time units
<LI>quatw,quati,quatj,quatk = unitless
<LI>tqx,tqy,tqz = torque units
<LI>inertiax,inertiay,inertiaz = mass*distance^2 units 
</UL>
<P><B>Restrictions:</B>
</P>
<P>This compute is part of the RIGID package.  It is only enabled if
LAMMPS was built with that package.  See the <A HREF = "Section_start.html#start_3">Making
LAMMPS</A> section for more info.
</P>
<P><B>Related commands:</B>
</P>
<P><A HREF = "dump.html">dump local</A>, <A HREF = "compute_reduce.html">compute reduce</A>
</P>
<P><B>Default:</B> none
</P>
<!-- PAGE BREAK -->
</HTML>
